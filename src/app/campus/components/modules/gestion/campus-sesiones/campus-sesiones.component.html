<div class="p-6">
  <!-- Spinner de carga -->
  <app-general-loading-spinner [visible]="isLoading" [message]="'Cargando sesiones...'"></app-general-loading-spinner>
  <app-breadcrumb [items]="breadcrumbItems"></app-breadcrumb>
  <!-- Título dinámico -->
  <h1 class="text-3xl md:text-4xl font-bold text-gray-100 mb-6 bg-gray-800 bg-opacity-50 border-l-4 border-blue-500 pl-4 py-2 rounded-r-md">
    Sesiones del curso <span class="text-blue-400">{{ cursoNombre }}</span> de {{ grado }} "{{ seccion }}"
  </h1>

  <!-- Mensaje si no hay sesiones -->
  <div *ngIf="sesiones.length === 0" class="text-center text-gray-500">
    No hay sesiones disponibles para este curso.
  </div>

  <!-- Botón Agregar (visible solo para Profesor) -->
  <div class="flex justify-end p-4" *ngIf="rolUsuario === 'Profesor'">
    <div class="bg-white border divide-x rounded-lg overflow-hidden dark:bg-gray-900 dark:border-gray-700 dark:divide-gray-700">
      <button
        (click)="openAddModal()"
        class="flex items-center px-4 py-2 text-sm font-medium text-gray-600 transition-colors duration-200 sm:text-base sm:px-6 dark:hover:bg-gray-800 dark:text-gray-300 gap-x-3 hover:bg-gray-100 w-auto"
      >
        <fa-icon [icon]="['fas', 'plus']" class="w-5 h-5 sm:w-6 sm:h-6"></fa-icon>
        <span>Agregar</span>
      </button>
    </div>
  </div>

  <!-- Tarjetas de sesiones -->
  <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4 p-4 bg-dark">
    <div
      *ngFor="let sesion of sesiones | paginate: { itemsPerPage: 4, currentPage: page }; let i = index"
      class="flex flex-col bg-white dark:bg-gray-900 rounded-lg shadow-md hover:shadow-lg transition-shadow duration-200"
    >
      <!-- Tarjeta de sesión -->
      <app-card-week
        [week]="'Sesión ' + ((page - 1) * 4 + (i + 1))"
        [title]="sesion.titulo || 'Nombre de la sesión'"
        [description]="sesion.descripcion || 'Descripción de la clase'"
        [route]="'/card-actividades'"
        [idSesion]="sesion.idSesion"
        [fechaAsignada]="sesion.fechaAsignada"
        (click)="irAActividades(sesion.idSesion!)"
      ></app-card-week>

      <!-- Botones Editar y Eliminar (visibles solo para Profesor) -->
      <div class="flex border-t divide-x dark:border-gray-700 dark:divide-gray-700" *ngIf="rolUsuario === 'Profesor'">
        <button
          (click)="openEditModal(sesion)"
          class="flex-1 flex items-center justify-center px-2 py-2 xl:px-4 xl:py-2 text-sm font-medium text-gray-600 transition-colors duration-200 xl:text-base dark:hover:bg-gray-800 dark:text-gray-300 hover:bg-gray-100 gap-x-2"
        >
          <fa-icon [icon]="['fas', 'pencil']" class="w-5 h-5 xl:w-6 xl:h-6"></fa-icon>
          <span class="hidden xl:inline">Editar</span>
        </button>
        <button
          (click)="eliminarSesion(sesion.idSesion!)"
          class="flex-1 flex items-center justify-center px-2 py-2 xl:px-4 xl:py-2 text-sm font-medium text-gray-600 transition-colors duration-200 xl:text-base dark:hover:bg-gray-800 dark:text-gray-300 hover:bg-gray-100 gap-x-2"
        >
          <fa-icon [icon]="['fas', 'trash']" class="w-5 h-5 xl:w-6 xl:h-6"></fa-icon>
          <span class="hidden xl:inline">Eliminar</span>
        </button>
      </div>
    </div>
  </div>

  <!-- Paginación -->
  <app-pagination
  [currentPage]="page"
  [itemsPerPage]="4"
  [totalItems]="sesiones.length"
  (pageChange)="page = $event"
></app-pagination>

  <app-notification></app-notification>
</div>